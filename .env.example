# NovaAvatar Environment Configuration
# Copy this file to .env and fill in your API keys

# =============================================================================
# AI Services
# =============================================================================

# OpenAI API Key (required for GPT-4 script generation)
# Get from: https://platform.openai.com/api-keys
OPENAI_API_KEY=sk-...

# Replicate API Token (required for Flux image generation)
# Get from: https://replicate.com/account/api-tokens
REPLICATE_API_TOKEN=r8_...


# =============================================================================
# Content Sources
# =============================================================================

# Reddit API Credentials (optional - for Reddit scraping)
# Get from: https://www.reddit.com/prefs/apps
REDDIT_CLIENT_ID=your_client_id
REDDIT_CLIENT_SECRET=your_client_secret

# NewsAPI Key (optional - for news scraping)
# Get from: https://newsapi.org/register
NEWSAPI_KEY=your_newsapi_key


# =============================================================================
# TTS Configuration
# =============================================================================

# Dia TTS Model Path (optional - if using local Dia TTS)
# Leave blank to use OpenAI TTS as fallback
DIA_MODEL_PATH=/path/to/dia/model


# =============================================================================
# Redis Configuration
# =============================================================================

# Redis URL for job queue (optional - for production)
# Default: redis://localhost:6379
REDIS_URL=redis://localhost:6379


# =============================================================================
# OmniAvatar Model Configuration
# =============================================================================

# Model Selection (14B or 1.3B)
# 14B: Higher quality, requires 21-36GB VRAM
# 1.3B: Faster, requires ~12GB VRAM
USE_14B_MODEL=false

# Model Paths (if different from default)
# Default paths are in pretrained_models/
# TEXT_ENCODER_PATH=pretrained_models/Wan2.1-T2V-1.3B/models_t5_umt5-xxl-enc-bf16.pth
# DIT_PATH=pretrained_models/Wan2.1-T2V-1.3B/diffusion_pytorch_model-*.safetensors
# VAE_PATH=pretrained_models/Wan2.1-T2V-1.3B/Wan2.1_VAE.pth
# WAV2VEC_PATH=pretrained_models/wav2vec2-base-960h
# LORA_PATH=pretrained_models/OmniAvatar-1.3B
# IMAGE_ENCODER_PATH=pretrained_models/clip_vision_h


# =============================================================================
# Generation Parameters
# =============================================================================

# Inference Steps (10-50, default: 25)
# Higher = better quality but slower
NUM_STEPS=25

# Guidance Scale (1.0-10.0, default: 4.5)
# Controls how closely to follow the text prompt
GUIDANCE_SCALE=4.5

# Audio Scale (1.0-10.0, default: same as GUIDANCE_SCALE)
# Controls audio conditioning strength
# AUDIO_SCALE=4.5

# TeaCache Threshold (0.0-0.15, default: 0.14)
# 0 = disabled, higher = faster but lower quality
# Recommended: 0.14 for good speed/quality balance
TEA_CACHE_THRESH=0.14

# Enable VRAM Management (true/false, default: true)
# Helps reduce VRAM usage at the cost of some speed
ENABLE_VRAM_MANAGEMENT=true


# =============================================================================
# Server Configuration
# =============================================================================

# Gradio Server
GRADIO_SERVER_PORT=7860
GRADIO_SERVER_NAME=0.0.0.0

# FastAPI Server
API_SERVER_PORT=8000
API_SERVER_HOST=0.0.0.0

# Enable sharing (Gradio public URL)
GRADIO_SHARE=false


# =============================================================================
# Storage Configuration
# =============================================================================

# Base storage directory (default: storage/)
STORAGE_DIR=storage

# Auto-approve videos (skip review queue)
# Set to true to automatically approve all generated videos
AUTO_APPROVE=false


# =============================================================================
# Logging & Monitoring
# =============================================================================

# Log Level (DEBUG, INFO, WARNING, ERROR)
LOG_LEVEL=INFO

# Sentry DSN (optional - for error monitoring)
# SENTRY_DSN=https://...@sentry.io/...


# =============================================================================
# Production Settings
# =============================================================================

# Enable CORS (for API access from web apps)
ENABLE_CORS=true

# API Rate Limiting (requests per minute)
RATE_LIMIT_PER_MINUTE=10

# Maximum concurrent jobs
MAX_CONCURRENT_JOBS=2

# Job timeout (seconds)
JOB_TIMEOUT=3600
